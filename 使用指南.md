# 游戏服务器完整使用指南

## 🚀 快速开始

### 1. 启动服务器
```bash
# 方法1：双击运行
start_server.bat

# 方法2：命令行运行
python server.py
```

### 2. 测试连接
```bash
python test_client.py
```

### 3. 启动游戏
```bash
python main.py
```

## 📋 服务器功能

### 房间管理
- ✅ 自动创建房间
- ✅ 房间号自定义
- ✅ 最多2名玩家
- ✅ 房主权限管理

### 游戏同步
- ✅ 实时动作同步
- ✅ 状态广播
- ✅ 断线重连支持
- ✅ 错误处理

### 执棋方选择
- ✅ 房主选择执棋方
- ✅ 实时更新
- ✅ 自动分配

## 🎮 游戏流程

### 创建房间
1. 启动服务器
2. 启动游戏客户端
3. 选择"网络对战"
4. 输入房间号（如：123）
5. 输入玩家名字
6. 点击"创建房间"

### 加入房间
1. 启动游戏客户端
2. 选择"网络对战"
3. 输入房间号
4. 输入玩家名字
5. 点击"加入房间"

### 开始游戏
1. 两名玩家都加入后
2. 房主选择执棋方
3. 房主点击"开始游戏"
4. 游戏开始

## 🌐 网络配置

### 本地连接
- 地址：`ws://localhost:8765`
- 适用：同一台电脑

### 局域网连接
- 地址：`ws://[IP地址]:8765`
- 适用：同一局域网

### 获取IP地址
```bash
# Windows
ipconfig

# 查找"IPv4 地址"字段
# 例如：192.168.1.100
```

## 🔧 故障排除

### 服务器问题
| 问题 | 解决方案 |
|------|----------|
| 端口被占用 | 修改server.py中的端口号 |
| 依赖缺失 | `pip install -r requirements.txt` |
| 权限不足 | 以管理员身份运行 |

### 连接问题
| 问题 | 解决方案 |
|------|----------|
| 连接被拒绝 | 检查服务器是否启动 |
| 连接超时 | 检查网络和防火墙 |
| 地址错误 | 确认IP地址和端口 |

### 游戏问题
| 问题 | 解决方案 |
|------|----------|
| 同步延迟 | 检查网络稳定性 |
| 动作丢失 | 重新连接服务器 |
| 房间满员 | 创建新房间 |

## 📊 服务器监控

### 日志信息
服务器会显示以下信息：
- 玩家连接/断开
- 房间创建/删除
- 游戏开始/结束
- 错误和警告

### 性能监控
- 连接数统计
- 房间数量
- 网络延迟

## 🔒 安全建议

### 网络安全
- 仅在可信网络使用
- 配置防火墙规则
- 定期更新依赖

### 数据安全
- 不传输敏感信息
- 使用加密连接（可选）
- 监控异常连接

## 📝 开发说明

### 服务器架构
```
GameServer
├── GameRoom (房间管理)
├── 玩家连接管理
├── 消息处理
└── 广播系统
```

### 消息协议
```json
{
  "type": "消息类型",
  "data": "消息数据"
}
```

### 扩展功能
- 多房间支持
- 观战模式
- 聊天系统
- 排行榜

## 🎯 最佳实践

### 服务器部署
1. 使用稳定的网络环境
2. 配置适当的防火墙规则
3. 监控服务器状态
4. 定期备份配置

### 游戏体验
1. 确保网络稳定
2. 避免频繁断线重连
3. 合理设置房间号
4. 及时处理异常

## 📞 技术支持

### 常见问题
1. **服务器无法启动**
   - 检查Python版本
   - 确认依赖安装
   - 查看错误日志

2. **客户端无法连接**
   - 确认服务器地址
   - 检查网络连接
   - 验证防火墙设置

3. **游戏同步问题**
   - 检查网络延迟
   - 重启服务器
   - 重新连接客户端

### 联系支持
- 查看日志文件
- 检查网络配置
- 重启相关服务 